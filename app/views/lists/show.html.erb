
<div class="list-page">
  <h1><%= @list.title %></h1>
  <div class="row">

    <div class="col-md-3">
      <p>
        Voting for this list is still open...
      </p>

      <% if @list.voters.include?(current_user) %>
        <% @ballot = @list.ballots.find_by(voter: current_user) %>
        <%= link_to "Adjust your ballot", @ballot %>

      <% elsif user_signed_in? %>
        <form class="add-ballot-btn" action="/ballots" method="post">
          <input type="hidden" name="list_id" value="<%= @list.id %>">
          <input type="submit" value="Create your ballot">
        </form>
      <% else %>
        <%= link_to "Log in to contribute", '/login' %>
      <% end %>
      <br><br>
      <p>
        Created by: <%= @list.owner.username %>
      </p>
      Contributors so far:
      <% @list_data[:voters].each do |voter| %>
        <a href="/ballots/<%= voter[:ballot_id] %>"><%= voter[:username] %></a>
      <% end %>
    </div>

    <div class="col-md-9">
      <%= react_component "ListResults", results: @list_data[:results].sort_by {|result| result[:points]}.reverse %>
    </div>

  </div>
</div>
